<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <main>
        <div class="contenedor">
            <div class="partesuperior">
                <div class="printer">
                    <input class="result" type="text" value="0" readonly>
                </div>
            </div>
            <div class="partedeabajo">
                <button value="AC" class="btn ac grey">AC</button>
                <button value="DEL" class="btn grey">DEL</button>
                <button value="%" class="btn % grey">%</button>
                <button value="/" class="btn special orange">/</button>
                <button value="7" class="btn black">7</button>
                <button value="8" class="btn black">8</button>
                <button value="9" class="btn black">9</button>
                <button value="*" class="btn special orange">*</button>
                <button value="4" class="btn black">4</button>
                <button value="5" class="btn black">5</button>
                <button value="6" class="btn black">6</button>
                <button value="-" class="btn special orange">-</button>
                <button value="1" class="btn black">1</button>
                <button value="2" class="btn black">2</button>
                <button value="3" class="btn black">3</button>
                <button value="+" class="btn special orange">+</button>
                <button value="0" id="cero" class="btn black">0</button>
                <button value="." class="btn black">.</button>
                <button id="equal" value="equal" class="btn equal orange">=</button>
            </div>
        </div>
    </main>
</body> 
<script>
    let operadores = ['*', '+', '-', '/', '%'];
    let botones = document.querySelectorAll(".btn");
    let printer = document.querySelector('.result');
    let match = '';
    let calculo = '', calculoconcat = '', cont=0, ultimocaracter='', ultimocaracterp='', regex=/(\d+)\s*([+/-])\s*(\d+)%/;
    let specialbuttons = document.querySelectorAll('.special');
    let todoslosbotones = [...botones];
    
     todoslosbotones.forEach(boton=>{

        boton.addEventListener('click', ()=>{
           
            if(boton.classList.contains('black')){

                cont++;
                calculoconcat+= boton.value;
                printer.value=calculoconcat;

            }
            if(boton.classList.contains('special') && cont>0 ){

                ultimocaracter = calculoconcat.slice(-1);

                if(operadores.includes(ultimocaracter)){

                    console.log('xd');
                }else{

                   calculoconcat+= boton.value;
                   printer.value+=boton.value;

                
                 }        
                }

                if (boton.classList.contains('equal')){
                    calculoconcat=String(eval(calculoconcat));
                    printer.value=calculoconcat;
                }

                if(boton.classList.contains('ac')){
                    calculoconcat='';
                    printer.value=0;
                }

                if(boton.classList.contains('%')){
                    ultimocaracterp = calculoconcat.slice(-1);
                    
                    if(operadores.includes(ultimocaracterp)){
                        console.log('jajaj po')
                    }else{
                        calculoconcat+='%';
                        printer.value+='%';
                    
                        match = calculoconcat.match(regex);
                        if(match){
                        console.log('vas bien pa'+match[0]);
                        console.log('vas bien pa'+match[1]);
                        console.log('vas bien pa'+match[2]);
                        console.log('vas bien pa'+match[3]);

                        
                            }else{
                                console.log('no');
                            }
                    }
                   
                }
        })        
        
    })
    

</script>
</html>